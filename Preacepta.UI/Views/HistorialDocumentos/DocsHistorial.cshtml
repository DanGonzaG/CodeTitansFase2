@model IEnumerable<Preacepta.Modelos.AbstraccionesFrond.HistorialDocumento>
<head>
    <link href="~/lyso/css/Andy.css" rel="stylesheet" />
    <link href="~/lyso/css/daniel.css" rel="stylesheet" />
</head>

<!-- Page Title -->
<div class="page-title-area page-title-area-two title-img-one">
    <div class="d-table">
        <div class="d-table-cell">
            <div class="page-title-text">
                <h2>Historial de documentos legales</h2>
                <ul>
                    <li>
                        <a asp-controller="Home" asp-action="Index">Inicio</a>
                    </li>
                    <li>
                        <i class="icofont-simple-right"></i>
                    </li>
                    <li>Historial</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<br />
<br />
<br />

<div class="contact-form contact-form-two contact-form-three">
    <div class="container">
        <div class="contact-wrap">


            <form asp-action="DocsHistorial" method="get">
                <h2 class="text-center">Filtrar el listado de documentos</h2>

                <!-- Fila de campos -->
                <div class="row justify-content-center">
                    <!-- Fecha -->
                    <div class="col-sm-4 col-md-3 filtro-campo">
                        <div class="form-group">
                            <label for="fecha">Fecha</label>
                            <input type="date" name="fecha" class="form-control" value="@(ViewContext.HttpContext.Request.Query["fecha"])" />
                        </div>
                    </div>

                    <!-- Tipo de documento -->
                    <div class="col-sm-4 col-md-4 filtro-campo">
                        <div class="form-group">
                            <label for="tipo">Tipo de documento</label>
                            <select name="tipo" class="form-control" asp-items="ViewBag.TipoDocumento">
                                <option value="">-- Todos los tipos --</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Fila del botón centrado -->
                <div class="row mt-3">
                    <div class="col text-center">
                        <button type="submit" class="boton-buscar">Buscar</button>
                    </div>
                </div>
            </form>





        </div>
    </div>
</div>

<div class="formulario contact-form contact-form-two contact-form-three LetraNegra">
    <div class="container">
        <table class="table LetraNegra">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Tipo de Documento</th>
                    <th>Cliente</th>
                    <th>Abogado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Fecha.ToString("dd/MM/yyyy")</td>
                        <td>@item.TipoDocumento</td>
                        <td>@item.Cliente</td>
                        <td>@item.Abogado</td>
                        <td>
                            <a class="cmn-btn" asp-controller="DocsGenerator" asp-action="DocsPrevisualizacion"><i class="fa-solid fa-eye"></i></a> <!--Necesito modificar esta parte para que se vea el pdf-->
                            <a class="cmn-btn" asp-controller="Home" asp-action="Index"><i class="fa-solid fa-download"></i></a>
                            <a class="cmn-btn"
                               asp-controller="@(item.TipoDocumento == "Pagaré" ? "TDocsPagares" :
                                                    item.TipoDocumento == "Compra y venta de vehículos" ? "DocsOpcionCompraventaVehiculoes" :
                                                    item.TipoDocumento == "Poderes especiales judiciales" ? "TDocsPoderesEspecialesJudiciales" :
                                                    "HistorialDocumentos")"
                           asp-action="EditarDesdeHistorial"
                           asp-route-id="@item.Id">
                            <i class="fa-solid fa-pen"></i>
                        </a>




                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="~/lyso/js/configuraciontablas.js"></script>